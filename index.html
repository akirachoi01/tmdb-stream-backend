<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TMDB Streaming App</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.5/shaka-player.compiled.min.js"></script>
  <style>
    body { background: #000; color: #fff; font-family: sans-serif; }
    video { width: 100%; height: 500px; background: #000; }
    #title { margin: 10px 0; font-size: 1.5rem; }
  </style>
</head>
<body>

  <h2 id="title">Loading...</h2>
  <video id="video" controls autoplay></video>

  <script>
    async function loadStream(tmdbId) {
      const response = await fetch(`https://tmdb-stream-backend.vercel.app/api/stream?id=${tmdbId}`);
      const data = await response.json();

      document.getElementById("title").textContent = data.title;

      const video = document.getElementById("video");
      const player = new shaka.Player(video);

      // Error listener
      player.addEventListener("error", e => console.error("Shaka Error", e));

      try {
        await player.load(data.streamUrl);
        console.log("Stream loaded:", data.streamUrl);
      } catch (err) {
        console.error("Error loading stream", err);
      }
    }

    loadStream("1087192"); // You can change the TMDB ID here
  </script>

</body>
</html>
